{
  "name": "Inspyr Invoice Call",
  "callDynamicPromptPlaybook": {
    "pathwayId": "6b480cea-67ba-4ebe-8dc4-9fc90c7f950f",
    "pathwayVersion": "4",
    "model": "turbo",
    "voice": "Keelan",
    "interruptionThreshold": 90,
    "temperature": 0.4,
    "maxDuration": 12,
    "pronunciationGuide": [
      {
        "word": "INSPYR",
        "pronunciation": "In-spy-er"
      },
      {
        "word": "TX",
        "pronunciation": "Texas"
      }
    ],
    "summaryPrompt": "What was the summary of the call in 3 sentences? This summary will be used by the accounts receivable team to monitor the status of this client's invoices, so ensure your response has only relevant information that you believe is important to the overall status and account. \n\nImportant notes: \n1. In your response, the 'user' should always be referred to as the client.",
    "analysisPrompt": "Invoice Specific Analysis: {{invoiceData}} You are analyzing a transcript of a call between Crystal (INSPYR Solutions accounts receivable) and a client about open invoices. Extract structured information about each invoice discussed.\r\nCreate an array of JSON objects where each object corresponds to a single invoice with these fields:\r\n\"invoiceNumber\" (string): The invoice number discussed.\r\n\"tag\" (string): Add ONE of the following tags or 'null':\r\n\"wasPaid\": client said they already paid the invoice.\r\n\"willPay\": client will pay in the future (only if \"wasPaid\" is not true).\r\n\"shouldEscalate\": invoice needs manual review, including:\r\nClient disputes amount\r\nClient refuses/delays payment due to problems\r\nClient confused about charges\r\nClient requests clarification\r\nClient won't pay until something is fixed\r\nProject cancelled\r\nAI cannot fully resolve concern\r\n\"promiseDate\" (string or null): If \"willPay\" tag, provide date in YYYY-MM-DD format. Null if no specific date given.\r\n\"escalationNotes\" (string or null): Why invoice should be escalated. Null if no \"shouldEscalate\" tag. If there are escalation notes, then the tag MUST BE \"shouldEscalate\".\r\nRules:\r\nIdentify invoices by invoiceNumber\r\nUse most recent/clear statement if client updates information\r\nSet \"promiseDate\" to null for vague timeframes\r\nTag \"shouldEscalate\" for confusion, disputes, or payment refusal\r\nExtract only clearly stated information\r\nOutput only JSON array\r\nReturn 'null' if no invoices discussed\r\nLabel output as \"invoiceData\"\r\nGlobal Call Analysis: {{globalAnalysis}} You are analyzing a transcript of a call between an employee in the accounts receivable department for INSPYR Solutions named Crystal, and a client regarding invoices.\r\nReturn a single JSON object with the following fields:\r\n\"callBackRequested\" (boolean): Return 'true' only if the user explicitly asked to be called back because they were currently busy or unavailable at the time of the call. Return 'false' if the user does not explicitly ask to be called back or if the user tells you to call a different person than themselves.\r\n\r\n\r\n\"callBackDateTime\" (string or null): Purpose: Determine the correct callback time from a transcript, relative to {{now}} and {{timezone}}, and output it as a single JSON object. Instructions:\r\n\r\n\r\nIf the transcript says \"Call me back in X minutes\" and X \u2264 30 then add 30 minutes.\r\nIf the transcript says \"Call me back in X minutes\" and X > 30 then add X minutes.\r\nIf the transcript contains an explicit date/time phrase (e.g. \"Friday, June 6 at 3 PM\") then parse that phrase.\r\nIf the transcript says \"Call me back\" with no time then add 24 hours.\r\nIf no callback request is found then result is null.\r\nIf the result is not null, consider the callback time and timezone, then convert the time to UTC and format as ISO 8601 ending with \"Z\".\r\n\"clientUpdates\" (string): If the user provides information relevant to the client company (billing contacts, payment method changes, required forms, financial updates, operational challenges, restructuring, business decisions), summarize clearly here. Exclude casual comments unrelated to business.\r\n\r\n\r\n\"wasVoicemail\" (Boolean): Analyze the call transcript to determine if the response was a voicemail system or a human. If any of the following phrases (or very similar variations) are detected:\r\n\r\n\r\n\"Please leave a message after the beep\"\r\n\"No one is available to take your call\"\r\n\"Record your message after the tone\"\r\n\"You have reached voicemail for...\"\r\n\"You have reached [phone number]\"\r\n\"[phone number] is unavailable\"\r\n\"The person you are trying to reach...\"\r\n\"The number you have dialed...\"\r\n\"Your call has been forwarded to an automated voice messaging system\" Then return true, else return false.\r\n\"realizeItsAI\" (Boolean): If the user asks to speak to a human or if the user asks if you are a robot, an AI, or anything similar, then return true. If the user does not realize you are an AI and does not ask to speak to a human, then return false.\r\nRules:\r\nDo not include the \"callBackRequested\" tag if the user simply requests general follow-up (e.g., \"have someone email me\" or \"call me about the invoice\") \u2014 it must be due to being busy or unavailable right now.\r\nRespond with a single JSON object. Do not return an array or include anything outside the object.\r\nLabel your output key value as \"globalAnalysis\"\r\n",
    "analysisSchema": {
      "invoiceData": "[{\"invoiceNumber\":\"string\",\"tag\":\"string\",\"promiseDate\":\"string\",\"escalationNotes\":\"string\"}]",
      "globalAnalysis": "{\"callBackRequested\":\"boolean\",\"callBackDateTime\":\"string\",\"clientUpdates\":\"string\",\"wasVoicemail\":\"boolean\",\"realizeItsAI\":\"boolean\"}"
    }
  }
}
